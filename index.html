<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Oheha‚Äôs Breakfast Sudoku</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
      body {
        background: linear-gradient(180deg, #fff7e3, #f7d9aa, #eac086);
        font-family: "Poppins", sans-serif;
      }

      .sudoku-grid {
        display: grid;
        border: 2px solid #c28e4c;
        border-radius: 1rem;
        background: linear-gradient(145deg, #fbe6b5, #e6c08a);
        overflow: hidden;
        width: min(90vw, 500px);
        aspect-ratio: 1 / 1;
        margin: auto;
      }

      .sudoku-cell {
        border: 1px solid rgba(0, 0, 0, 0.1);
        text-align: center;
        font-weight: 600;
        background: linear-gradient(135deg, #fff4d0, #f5d69c);
        transition: background 0.2s, transform 0.1s;
      }

      .sudoku-cell:focus {
        outline: none;
        background: #ffe9b3;
        transform: scale(1.05);
      }

      .hidden {
        display: none;
      }

      button {
        transition: all 0.2s;
      }

      button:hover {
        transform: scale(1.05);
      }
    </style>
  </head>

  <body class="flex flex-col items-center justify-center min-h-screen p-4">
    <h1
      class="text-3xl font-bold text-center mb-4 bg-gradient-to-r from-orange-500 to-amber-400 text-transparent bg-clip-text"
    >
      üç≥ Oheha‚Äôs Breakfast Sudoku
    </h1>

    <!-- Tutorial -->
    <div
      id="tutorial"
      class="text-center bg-white/70 p-4 rounded-xl shadow max-w-md mb-4"
    >
      <h2 class="font-semibold text-lg mb-2">How to Play</h2>
      <p class="text-gray-700 mb-2">
        Fill the grid so that each row, column, and box contains all numbers
        exactly once.
      </p>
      <p class="text-gray-700">
        Use <strong>Reset</strong> to start fresh or <strong>Solve</strong> to
        see the full solution.
      </p>
      <p class="mt-2 text-amber-700 font-medium">
        üåü Tip: Try solving without using Solve to sharpen your mind!
      </p>
    </div>

    <!-- Setup -->
    <div id="setup" class="text-center mb-4">
      <p class="mb-2 text-gray-700 font-semibold">Choose Grid Size:</p>
      <div class="flex justify-center gap-3 mb-4">
        <button
          class="px-3 py-2 bg-gradient-to-br from-yellow-300 to-orange-300 rounded-xl shadow-md"
          onclick="selectSize(3)"
        >
          3√ó3
        </button>
        <button
          class="px-3 py-2 bg-gradient-to-br from-yellow-300 to-orange-300 rounded-xl shadow-md"
          onclick="selectSize(9)"
        >
          9√ó9
        </button>
        <button
          class="px-3 py-2 bg-gradient-to-br from-yellow-300 to-orange-300 rounded-xl shadow-md"
          onclick="selectSize(16)"
        >
          16√ó16
        </button>
      </div>

      <p class="mb-2 text-gray-700 font-semibold">Select Difficulty:</p>
      <div class="flex justify-center gap-3">
        <button
          class="px-3 py-2 bg-gradient-to-br from-green-300 to-green-400 rounded-xl shadow-md"
          onclick="startGame('Easy')"
        >
          Easy
        </button>
        <button
          class="px-3 py-2 bg-gradient-to-br from-yellow-300 to-amber-400 rounded-xl shadow-md"
          onclick="startGame('Medium')"
        >
          Medium
        </button>
        <button
          class="px-3 py-2 bg-gradient-to-br from-red-300 to-red-400 rounded-xl shadow-md"
          onclick="startGame('Hard')"
        >
          Hard
        </button>
      </div>
    </div>

    <!-- Game -->
    <div id="game" class="hidden text-center">
      <div
        id="sudoku"
        class="sudoku-grid mb-4"
        style="grid-template-columns: repeat(9, 1fr)"
      ></div>

      <div class="flex justify-center items-center gap-4 mb-4">
        <span id="timer" class="font-semibold text-amber-800">‚è± 00:00</span>
        <button
          class="px-4 py-2 bg-orange-400 rounded-xl shadow"
          onclick="solveGame()"
        >
          Solve
        </button>
        <button
          class="px-4 py-2 bg-amber-300 rounded-xl shadow"
          onclick="resetGame()"
        >
          Reset
        </button>
      </div>
    </div>

    <script>
      let gridSize = 9;
      let difficulty = "Easy";
      let grid = [];
      let timerInterval;
      let seconds = 0;

      function selectSize(size) {
        gridSize = size;
      }

      function startGame(diff) {
        difficulty = diff;
        document.getElementById("setup").classList.add("hidden");
        document.getElementById("game").classList.remove("hidden");

        const saved = localStorage.getItem(`sudoku-${gridSize}-${difficulty}`);
        grid = saved ? JSON.parse(saved) : Array(gridSize)
          .fill()
          .map(() => Array(gridSize).fill(""));

        renderGrid();
        startTimer();
      }

      function renderGrid() {
        const sudoku = document.getElementById("sudoku");
        sudoku.style.gridTemplateColumns = `repeat(${gridSize}, 1fr)`;
        sudoku.innerHTML = "";

        grid.forEach((row, i) => {
          row.forEach((cell, j) => {
            const input = document.createElement("input");
            input.className =
              "sudoku-cell text-base sm:text-lg md:text-xl flex items-center justify-center";
            input.maxLength = gridSize > 9 ? 2 : 1;
            input.value = cell;
            input.oninput = (e) => handleInput(e, i, j);
            sudoku.appendChild(input);
          });
        });

        localStorage.setItem(
          `sudoku-${gridSize}-${difficulty}`,
          JSON.stringify(grid)
        );
      }

      function handleInput(e, i, j) {
        grid[i][j] = e.target.value;
        localStorage.setItem(
          `sudoku-${gridSize}-${difficulty}`,
          JSON.stringify(grid)
        );
      }

      function resetGame() {
        clearInterval(timerInterval);
        localStorage.removeItem(`sudoku-${gridSize}-${difficulty}`);
        seconds = 0;
        startGame(difficulty);
      }

      function solveGame() {
        alert(`Auto-solver for ${difficulty} difficulty will come soon üòé`);
      }

      function startTimer() {
        clearInterval(timerInterval);
        timerInterval = setInterval(() => {
          seconds++;
          const min = String(Math.floor(seconds / 60)).padStart(2, "0");
          const sec = String(seconds % 60).padStart(2, "0");
          document.getElementById("timer").textContent = `‚è± ${min}:${sec}`;
        }, 1000);
      }
    </script>
  </body>
</html>
